<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />

    <title>Netlify CMS Development Test</title>
  </head>
  <body>
    <script src="https://unpkg.com/netlify-cms@^2.0.0/dist/netlify-cms.js"></script>
    <script>
      const YoutubeLink = {
        id: 'youtube',
        label: 'Youtube',
        fields: [{ name: 'id', label: 'Youtube Video ID', widget: 'string' }],
        pattern: /^<span class="yo-youtube"><iframe src="\/\/www.youtube.com\/embed\/(.*)" frameborder="0" allowfullscreen><\/iframe><\/span>/,
        fromBlock: function(match) {
          // console.log(match)
          return {
            id: match && match[1] ? match[1] : '',
          };
        },
        toBlock: function(obj) {
          return `<span class="yo-youtube"><iframe src="//www.youtube.com/embed/${obj.id}" frameborder="0" allowfullscreen></iframe></span>`;
        },
        toPreview: function(obj) {
          return `<span class="yo-youtube"><iframe src="//www.youtube.com/embed/${obj.id}" frameborder="0" allowfullscreen></iframe></span>`;
        },
      };
      CMS.registerEditorComponent(YoutubeLink);
    </script>
  </body>
</html>
